function addCopyIcons(){let t=document.createElement("i");t.className="fa-solid icon icon-copy copy-code",t.title="复制代码",document.querySelectorAll(".post-detail figure").forEach(e=>{e.appendChild(t.cloneNode(!0))}),document.querySelectorAll(".post-detail pre[class*=language-].line-numbers").forEach(e=>{e.appendChild(t.cloneNode(!0))}),document.querySelectorAll(".post-detail .copy-code").forEach(e=>{e.addEventListener("click",function(){var e=window.getSelection(),t=document.createRange(),o="TABLE"===this.previousElementSibling.tagName?this.previousElementSibling:null,o=o?o.querySelector(".code pre"):this.previousElementSibling;t.selectNodeContents(o),e.removeAllRanges(),e.addRange(t),e.toString(),document.execCommand("copy"),e.removeAllRanges(),this.innerHTML='<span class="copy-success"> 复制成功</span>';let n=this;setTimeout(()=>{n.innerHTML=""},2500)})})}function setLanguageAttributes(){let t=(e,t)=>{var o=e.getAttribute("class");o&&(o=o.replace(t,"").trim().replace("language-","").trim(),e.setAttribute("data-content-after",o||"CODE"))};document.querySelectorAll("code").forEach(e=>{t(e,"line-numbers")}),document.querySelectorAll(".highlight").forEach(e=>{t(e,"highlight")})}function handleScroll(){let l=document.querySelectorAll(".top-box a"),i=window.scrollY+100;l.forEach((e,t)=>{var o=document.getElementById(decodeURI(e.hash).substring(1));let n=null;l[t+1]&&(n=document.getElementById(decodeURI(l[t+1].hash).substring(1))),o.offsetTop<=i&&(!n||n.offsetTop>i)?e.classList.add("current"):e.classList.remove("current")})}function bindScrollEvent(){window.addEventListener("scroll",()=>{handleScroll()})}function bindClickEvent(){document.querySelectorAll(".top-box-link").forEach(e=>{e.addEventListener("click",()=>{setTimeout(()=>{window.scrollTo(window.pageXOffset,window.pageYOffset-54),console.log(window.pageYOffset-54,"滚动条位置")},0)})})}function lazyload(e,t){t.now=Date.now(),t.needLoad=Array.from(e).some(e=>e.hasAttribute("lazyload"));let o=window.innerHeight,l=document.documentElement.scrollTop||document.body.scrollTop;e.forEach(n=>{if(n.hasAttribute("lazyload")&&!n.hasAttribute("loading")&&o+l>n.offsetTop){n.setAttribute("loading",!0);let o=setTimeout(()=>{var e=new Image;let t=n.getAttribute("data-src");e.src=t,e.onload=()=>{n.src=t,n.removeAttribute("lazyload"),n.removeAttribute("loading"),clearTimeout(o)}},300)}})}function lazyloadLoad(){if(window.theme_config.image&&window.theme_config.image.lazyload_enable){let e=document.querySelectorAll("img"),t={now:Date.now(),needLoad:!0};lazyload(e,t),window.onscroll=()=>{50<Date.now()-t.now&&t.needLoad&&lazyload(e,t)}}}function themeBoot(){window.is_post&&(addCopyIcons(),setLanguageAttributes(),bindScrollEvent(),bindClickEvent()),lazyloadLoad()}document.querySelector(".menu-switch").addEventListener("click",function(){let e=document.querySelector(".menu-container");this.classList.contains("icon-menu-outline")?(this.classList.replace("icon-menu-outline","icon-close-outline"),e.style.opacity="1",e.style.height="auto",e.style["z-index"]="1024"):(this.classList.replace("icon-close-outline","icon-menu-outline"),e.style.opacity="0",e.style["z-index"]="0",setTimeout(()=>{this.classList.contains("icon-menu-outline")&&(e.style.height="0")},600))}),window.addEventListener("DOMContentLoaded",()=>{themeBoot()}),window.addEventListener("hexo-blog-decrypt",()=>{themeBoot()});